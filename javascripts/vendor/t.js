(function(){var e,t,n,r=[].slice,i={}.hasOwnProperty;t="0.7.0",n=function(){var e,s;return e=function(){var t,n,i;return n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],i=e.templates[n],i.process.apply(i,t)},e.VERSION=t,e.create=n,e.templates={},e.internal=s={},s.callbacks=[],s.isArray=function(e){return e instanceof Array},s.isObject=function(e){return e!==null&&typeof e=="object"&&!(e instanceof Array)},s.isTemplate=function(e){return e!==null&&typeof e=="object"&&e.isTjsTemplate},s.isEmpty=function(e){var t;if(!e)return!0;for(t in e){if(!i.call(e,t))continue;return!1}return!0},s.hasFunction=function(e){var t,n,r,o,u;if(typeof e=="function")return!0;if(s.isTemplate(e))return!0;if(s.isArray(e))for(o=0,u=e.length;o<u;o++){t=e[o];if(s.hasFunction(t))return!0}else if(s.isObject(e))for(n in e){if(!i.call(e,n))continue;r=e[n];if(s.hasFunction(r))return!0}},s.merge=function(e,t){var n,r;if(!t)return e;if(!e)return t;for(n in t){if(!i.call(t,n))continue;r=t[n],e[n]=r}return e},s.Template=function(e,t){return this.template=e,this.name=t,this.isTjsTemplate=!0},s.Template.prototype.process=function(){var e,t;return e=1<=arguments.length?r.call(arguments,0):[],t=s.prepareOutput.apply(s,[this.template].concat(r.call(e))),t=s.normalize(t),t=s.processAttributes(t),new s.TemplateOutput(this,t)},s.Template.prototype.prepare=function(e){var t,n,o;for(t in e){if(!i.call(e,t))continue;o=e[t],s.isTemplate(o)||(e[t]=new s.Template(o))}return n=new s.Template(this.template,this.name),n.process=function(){var t,n,i;t=1<=arguments.length?r.call(arguments,0):[];try{return s.includes&&(n=s.includes),e&&(s.includes=e),(i=s.Template.prototype.process).call.apply(i,[this].concat(r.call(t)))}finally{n?s.includes=n:delete s.includes}},n},s.TemplateOutput=function(e,t){this.template=e,this.tags=t},s.TemplateOutput.prototype.toString=function(){return s.render(this.tags)},s.TemplateOutput.prototype.render=function(e){return e.inside?$(e.inside).html(this.toString()):e.replace?$(e.replace).replace(this.toString()):e.prepend?$(e.prepend).prepend(this.toString()):e.append?$(e.append).append(this.toString()):e.before?$(e.before).before(this.toString()):e.after?$(e.after).after(this.toString()):e["with"]&&e["with"](this.toString()),s.registerCallbacks()},s.RENDER_COMPLETE_CALLBACK="renderComplete",s.FIRST_NO_PROCESS_PATTERN=/^<.*/,s.FIRST_FIELD_PATTERN=/^([^#.]+)?(#([^.]+))?(.(.*))?$/,s.processFirst=function(e){var t,n,r,i,o,u,a,f,l,c;r=e[0];if(s.isArray(r))return e;if(typeof r!="string")throw"Invalid first argument "+r;if(r.match(s.FIRST_NO_PROCESS_PATTERN))return e;f=r.split(" ");if(f.length>1){i=f.length-1,l=e.slice(1);while(i>=0)a=f[i],l.unshift(a),l=[s.processFirst(l)],i--;return l[0]}if(u=r.match(s.FIRST_FIELD_PATTERN)){c=u[1]||"div",o=u[3],n=u[5];if(o||n)t={},o&&(t.id=o),n&&(t["class"]=n.replace(/\./g," ")),e.splice(0,1,c,t)}return e},s.normalize=function(e){var t,n,i,o,u;if(!s.isArray(e))return e;for(n=o=u=e.length-1;u<=0?o<=0:o>=0;n=u<=0?++o:--o)i=s.normalize(e[n]),s.isArray(i)?(t=i[0],t===""?(i.shift(),e.splice.apply(e,[n,1].concat(r.call(i)))):(s.isArray(t)||s.isObject(t))&&e.splice.apply(e,[n,1].concat(r.call(i)))):i instanceof s.TemplateOutput?e[n]=i.tags:typeof i!="undefined"&&i!==null&&i!==""&&(e[n]=i);return e},s.parseStyles=function(e){var t,n,r,i,s,o,u,a;r={},u=e.split(";");for(s=0,o=u.length;s<o;s++)n=u[s],a=n.split(":"),t=a[0],i=a[1],t&&i&&(r[t.trim()]=i.trim());return r},s.processStyles=function(e){var t;return t=e.style,typeof t=="string"?e.style=s.parseStyles(t):s.isObject(t&&!s.isEmpty(t))&&(e.style=t),e},s.processCssClasses=function(e,t){return e["class"]&&(t["class"]?t["class"]=e["class"]+" "+t["class"]:t["class"]=e["class"]),t},s.processAttributes=function(e){var t,n,r,i,o,u,a,f,l;if(s.isArray(e)){if(e.length===0)return e;t={},e=s.processFirst(e);for(u=0,f=e.length;u<f;u++)r=e[u],s.isArray(r)?s.processAttributes(r):s.isObject(r)&&(s.processStyles(r),o=t.style,i=r.style,s.processCssClasses(t,r),t=s.merge(t,r),o=s.merge(o,i),s.isEmpty(o)||(t.style=o));for(n=a=l=e.length-1;l<=0?a<=0:a>=0;n=l<=0?++a:--a)s.isObject(e[n])&&e.splice(n,1);s.isEmpty(t)||e.splice(1,0,t)}return e},s.prepareOutput=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],typeof t=="function"?s.prepareOutput.apply(s,[t.apply(null,e)].concat(r.call(e))):s.isTemplate(t)?t.process.apply(t,e):t},s.registerCallbacks=function(e){var t,n,r,o,u,a,f;f=[];while(s.callbacks.length>0)a=s.callbacks.shift(),n=a[0],o=a[1],f.push(function(){var e,a,f,l;f=document.querySelectorAll("."+n),l=[];for(e=0,a=f.length;e<a;e++)r=f[e],r.getAttribute("class")===n?r.removeAttribute("class"):r.setAttribute("class",r.getAttribute("class").replace(n,"")),l.push(function(){var e;e=[];for(u in o){if(!i.call(o,u))continue;t=o[u],u===s.RENDER_COMPLETE_CALLBACK?e.push(t(r)):e.push($(r).on(u,t))}return e}());return l}());return f},s.getRandomCssClass=function(){return String(Math.random()).replace("0.","cls")},s.processCallbacks=function(e){var t,n,r,o,u;n=!1,o={};for(r in e){if(!i.call(e,r))continue;u=e[r],typeof u=="function"&&(n=!0,o[r]=u,delete e[r])}if(n)return t=s.getRandomCssClass(),s.callbacks.push([t,o]),e["class"]?e["class"]+=" "+t:e["class"]=t},s.renderAttributes=function(e){var t,n,r,o,u,a,f;r="",s.processCallbacks(e);for(t in e){if(!i.call(e,t))continue;f=e[t];if(t==="style"){a=e.style;if(s.isObject(a)){o="";for(n in a){if(!i.call(a,n))continue;u=a[n],typeof u=="number"&&(u+="px"),o+=n+":"+u+";"}r+=' style="'+o+'"'}else r+=' style="'+a+'"'}else r+=" "+t+'="'+f+'"'}return r},s.renderRest=function(e){var t;return function(){var n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(s.render(t));return i}().join("")},s.render=function(e){var t,n,r,i;if(typeof e=="undefined"||e===null)return"";if(!s.isArray(e))return""+e;if(e.length===0)return"";t=e.shift();if(s.isArray(t))return s.render(t)+function(){var t,r,i;i=[];for(t=0,r=e.length;t<r;t++)n=e[t],i.push(s.render(n));return i}().join("");if(t==="")return s.renderRest(e);if(e.length===0)return t==="script"?"<"+t+"></"+t+">":"<"+t+"/>";r="<"+t,i=e.shift();if(s.isObject(i)){r+=s.renderAttributes(i);if(e.length===0)return t==="script"?r+="></"+t+">":r+="/>",r;r+=">"}else{r+=">",r+=s.render(i);if(e.length===0)return r+="</"+t+">",r}return e.length>0&&(r+=s.renderRest(e),r+="</"+t+">"),r},e.get=function(t){return e.templates[t]},e.each=function(){var t,n,i;return i=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var s,o,u,a;a=[];for(o=0,u=n.length;o<u;o++)s=n[o],a.push(e.apply(null,[i,s].concat(r.call(t))));return a})},e.each_with_index=function(){var t,n,i;return i=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var s,o,u,a,f;f=[];for(s=u=0,a=n.length;u<a;s=++u)o=n[s],f.push(e.apply(null,[i,o,s].concat(r.call(t))));return f})},e.each_pair=function(){var t,n,s;return s=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var o,u,a;a=[];for(o in n){if(!i.call(n,o))continue;u=n[o],a.push(e.apply(null,[s,o,u].concat(r.call(t))))}return a})},e.process=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(n=new s.Template(t)).process.apply(n,e)},e.include=function(){var e,t,n,i;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(n=s.includes)!=null?(i=n[t]).process.apply(i,e):void 0},e.define=e.def=function(t,n){return e.templates[t]=new s.Template(n,t)},e.redefine=e.redef=function(t,n){var i,o,u;return o=e.templates[t],i=new s.Template(n),u=function(){var e,t;t=1<=arguments.length?r.call(arguments,0):[];try{return s.original&&(e=s.original),s.original=o,i.process.apply(i,t).tags}finally{e?s.original=e:delete s.original}},e.templates[t]=new s.Template(u,t)},e.wrapped=function(){var e,t;return e=1<=arguments.length?r.call(arguments,0):[],(t=s.original).process.apply(t,e)},e.escape=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},e.unescape=function(e){return e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"):e},s.thisRef=this,e.noConflict=function(){return e.oldT?s.thisRef.T=e.oldT:delete s.thisRef.T,e},this.T&&(e.oldT=this.T),e},e=n(),this.T=e,typeof module!="undefined"&&module!==null&&(module.exports=e)}).call(this);