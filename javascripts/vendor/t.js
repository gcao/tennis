(function(){var e,t,n,r=[].slice,i={}.hasOwnProperty;t="0.8.0",e=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],n.isTemplate(t)||(t=new n.Template(t)),t.process.apply(t,e)},e.VERSION=t,e.internal=n={},n.callbacks=[],n.isArray=function(e){return e instanceof Array},n.isObject=function(e){return e!==null&&typeof e=="object"&&!(e instanceof Array)},n.isTemplate=function(e){return e instanceof n.Template},n.isEmpty=function(e){var t;if(!e)return!0;for(t in e){if(!i.call(e,t))continue;return!1}return!0},n.hasFunction=function(e){var t,r,s,o,u;if(typeof e=="function")return!0;if(n.isTemplate(e))return!0;if(n.isArray(e))for(o=0,u=e.length;o<u;o++){t=e[o];if(n.hasFunction(t))return!0}else if(n.isObject(e))for(r in e){if(!i.call(e,r))continue;s=e[r];if(n.hasFunction(s))return!0}},n.merge=function(e,t){var r,s,o;if(!t)return e;if(!e)return t;for(r in t){if(!i.call(t,r))continue;s=t[r],["postProcess","postRender"].indexOf(r)>=0?(o=e[r],o?n.isArray(o)?o.push(s):e[r]=[o,s]:e[r]=s):e[r]=s}return e},n.Template=function(e){this.template=e},n.Template.prototype.process=function(){var e,t;return e=1<=arguments.length?r.call(arguments,0):[],t=n.prepareOutput.apply(n,[this.template].concat(r.call(e))),t=n.normalize(t),t=n.processAttributes(t),n.handlePostProcess(t),new n.TemplateOutput(this,t)},n.Template.prototype.prepare=function(e){var t,s,o;for(t in e){if(!i.call(e,t))continue;o=e[t],n.isTemplate(o)||(e[t]=new n.Template(o))}return s=new n.Template(this.template),s.process=function(){var t,i,s;t=1<=arguments.length?r.call(arguments,0):[];try{return n.includes&&(i=n.includes),e&&(n.includes=e),(s=n.Template.prototype.process).call.apply(s,[this].concat(r.call(t)))}finally{i?n.includes=i:delete n.includes}},s},n.TemplateOutput=function(e,t){this.template=e,this.tags=t},n.TemplateOutput.prototype.toString=function(e){return n.render(this.tags,e)},n.TemplateOutput.prototype.render=function(e){if(e.inside)$(e.inside).html(this.toString());else if(e.replace)$(e.replace).replaceWith(this.toString());else if(e.prependTo)$(e.prependTo).prepend(this.toString());else if(e.appendTo)$(e.appendTo).append(this.toString());else if(e.before)$(e.before).before(this.toString());else if(e.after)$(e.after).after(this.toString());else if(e.here)document.write(this.toString());else{if(!e.handler)return n.renderTags(this.tags);e.handler(this.toString())}return n.registerCallbacks()},n.FIRST_NO_PROCESS_PATTERN=/^<.*/,n.FIRST_FIELD_PATTERN=/^([^#.]+)?(#([^.]+))?(.(.*))?$/,n.processFirst=function(e){var t,r,i,s,o,u,a,f,l,c;i=e[0];if(n.isArray(i))return e;if(typeof i!="string")throw"Invalid first argument "+i;if(i.match(n.FIRST_NO_PROCESS_PATTERN))return e;f=i.split(" ");if(f.length>1){s=f.length-1,l=e.slice(1);while(s>=0)a=f[s],l.unshift(a),l=[n.processFirst(l)],s--;return l[0]}if(u=i.match(n.FIRST_FIELD_PATTERN)){c=u[1]||"div",o=u[3],r=u[5];if(o||r)t={},o&&(t.id=o),r&&(t["class"]=r.replace(/\./g," ")),e.splice(0,1,c,t)}return e},n.normalize=function(e){var t,i,s,o,u;if(!n.isArray(e))return e;for(i=o=u=e.length-1;u<=0?o<=0:o>=0;i=u<=0?++o:--o)s=n.normalize(e[i]),n.isArray(s)?(t=s[0],t===""?(s.shift(),e.splice.apply(e,[i,1].concat(r.call(s)))):(n.isArray(t)||n.isObject(t))&&e.splice.apply(e,[i,1].concat(r.call(s)))):s instanceof n.TemplateOutput?e[i]=s.tags:typeof s!="undefined"&&s!==null&&s!==""&&(e[i]=s);return e},n.parseStyles=function(e){var t,n,r,i,s,o,u,a;r={},u=e.split(";");for(s=0,o=u.length;s<o;s++)n=u[s],a=n.split(":"),t=a[0],i=a[1],t&&i&&(r[t.trim()]=i.trim());return r},n.processStyles=function(e){var t,r,s,o;r=e.style,typeof r=="string"?e.style=n.parseStyles(r):n.isObject(r&&!n.isEmpty(r))&&(e.style=r);if(e.style){o=e.style;for(t in o){if(!i.call(o,t))continue;s=o[t],t.indexOf("_")>=0&&(delete e.style[t],e.style[t.replace(/_/g,"-")]=s)}}return e},n.processCssClasses=function(e,t){return e["class"]&&(t["class"]?t["class"]=e["class"]+" "+t["class"]:t["class"]=e["class"]),t},n.processAttributes=function(e){var t,r,i,s,o,u,a,f,l;if(n.isArray(e)){if(e.length===0)return e;t={},e=n.processFirst(e);for(u=0,f=e.length;u<f;u++)i=e[u],n.isArray(i)?n.processAttributes(i):n.isObject(i)&&(n.processStyles(i),o=t.style,s=i.style,n.processCssClasses(t,i),t=n.merge(t,i),o=n.merge(o,s),n.isEmpty(o)||(t.style=o));for(r=a=l=e.length-1;l<=0?a<=0:a>=0;r=l<=0?++a:--a)n.isObject(e[r])&&e.splice(r,1);n.isEmpty(t)||e.splice(1,0,t)}return e},n.prepareOutput=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],typeof t=="function"?n.prepareOutput.apply(n,[t.apply(null,e)].concat(r.call(e))):n.isTemplate(t)?t.process.apply(t,e):t instanceof n.TemplateOutput?t.tags:t},n.handlePostProcess=function(e){var t,r,i,s,o,u,a,f;if(!n.isArray(e))return;for(s=0,u=e.length;s<u;s++)i=e[s],n.handlePostProcess(i);r=(f=e[1])!=null?f.postProcess:void 0;if(r){if(typeof r=="function")r(e);else for(o=0,a=r.length;o<a;o++)t=r[o],t(e);delete e[1].postProcess;if(n.isEmpty(e[1]))return e.splice(1,1)}},n.handlePostRender=function(e,t){var n,r,i,s;if(!e)return;if(typeof e=="function")return e(t);s=[];for(r=0,i=e.length;r<i;r++)n=e[r],s.push(n(t));return s},n.registerCallbacks=function(e){var t,r,s,o,u,a,f;f=[];while(n.callbacks.length>0)a=n.callbacks.shift(),r=a[0],o=a[1],f.push(function(){var e,a,f,l;f=document.querySelectorAll("."+r),l=[];for(e=0,a=f.length;e<a;e++)s=f[e],s.getAttribute("class")===r?s.removeAttribute("class"):s.setAttribute("class",s.getAttribute("class").replace(r,"")),l.push(function(){var e;e=[];for(u in o){if(!i.call(o,u))continue;t=o[u],u==="postRender"?e.push(n.handlePostRender(t,s)):e.push($(s).on(u,t))}return e}());return l}());return f},n.getRandomCssClass=function(){return String(Math.random()).replace("0.","cls")},n.processCallbacks=function(e){var t,r,s,o,u;r=!1,o={};for(s in e){if(!i.call(e,s))continue;u=e[s],typeof u=="function"&&(r=!0,o[s]=u,delete e[s])}if(r)return t=n.getRandomCssClass(),n.callbacks.push([t,o]),e["class"]?e["class"]+=" "+t:e["class"]=t},n.renderAttributes=function(e){var t,r,s,o,u,a,f;s="",n.processCallbacks(e);for(t in e){if(!i.call(e,t))continue;f=e[t];if(t!=="temp")if(t==="style"){a=e.style;if(n.isObject(a)){o="";for(r in a){if(!i.call(a,r))continue;u=a[r],typeof u=="number"&&(u+="px"),o+=r+":"+u+";"}s+=' style="'+o+'"'}else s+=' style="'+a+'"'}else s+=" "+t+'="'+f+'"'}return s},n.renderRest=function(e,t){var r;return function(){var i,s,o;o=[];for(i=0,s=e.length;i<s;i++)r=e[i],o.push(n.render(r,t));return o}().join("")},n.render=function(e,t){var r,s,o,u,a,f,l;if(typeof e=="undefined"||e===null)return"";if(!n.isArray(e))return""+e;if(e.length===0)return"";s=e.shift();if(n.isArray(s))return n.render(s,t)+function(){var r,i,s;s=[];for(r=0,i=e.length;r<i;r++)o=e[r],s.push(n.render(o,t));return s}().join("");if(s==="")return n.renderRest(e,t);if(e.length===0)return s==="script"?"<"+s+"></"+s+">":"<"+s+"/>";a="<"+s,f=e.shift();if(n.isObject(f)){r=f;if(t!=null?t.ignoreCallbacks:void 0){r={};for(u in f){if(!i.call(f,u))continue;l=f[u],typeof l!="function"&&(r[u]=l)}}a+=n.renderAttributes(r);if(e.length===0)return s==="script"?a+="></"+s+">":a+="/>",a;a+=">"}else{a+=">",a+=n.render(f);if(e.length===0)return a+="</"+s+">",a}return e.length>0&&(a+=n.renderRest(e,t),a+="</"+s+">"),a},n.renderTags=function(e){var t;return n.isArray(e[0])&&(t=document.createElement("div")),n.renderChildTags(t,e)},n.renderChildTags=function(e,t){var r,s,o,u,a,f,l,c,h,p,d,v,m;if(n.isArray(t[0])){for(p=0,v=t.length;p<v;p++)s=t[p],n.renderChildTags(e,s);return e}r=document.createElement(t.shift()),e&&e.appendChild(r),f=null;for(d=0,m=t.length;d<m;d++){a=t[d];if(typeof a=="string")r.appendChild(document.createTextNode(a));else if(n.isObject(a))for(u in a){if(!i.call(a,u))continue;h=a[u];if(u==="postRender")f=h;else if(typeof h=="function")$(r).bind(u,h);else if(u.toLowerCase()==="style"&&n.isObject(h)){l="";for(o in h){if(!i.call(h,o))continue;c=h[o],l+=""+o+":"+c+";"}h=l}r.setAttribute(u,h)}else n.isArray(a)&&n.renderChildTags(r,a)}return n.handlePostRender(f,r),r},e.each=function(){var t,n,i;return i=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var s,o,u,a;a=[];for(o=0,u=n.length;o<u;o++)s=n[o],a.push(e.apply(null,[i,s].concat(r.call(t))));return a})},e.eachWithIndex=function(){var t,n,i;return i=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var s,o,u,a,f;f=[];for(s=u=0,a=n.length;u<a;s=++u)o=n[s],f.push(e.apply(null,[i,o,s].concat(r.call(t))));return f})},e.eachPair=function(){var t,n,s;return s=arguments[0],n=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],e.process(function(){var o,u,a;a=[];for(o in n){if(!i.call(n,o))continue;u=n[o],a.push(e.apply(null,[s,o,u].concat(r.call(t))))}return a})},e.process=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],n.isTemplate(t)||(t=new n.Template(t)),t.process.apply(t,e)},e.prepare=function(e,t){return n.isTemplate(e)||(e=new n.Template(e)),e.prepare(t)},e.include=function(){var e,t,i,s;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(i=n.includes)!=null?(s=i[t])!=null?s.process.apply(s,e):void 0:void 0},e.template=function(e){return new n.Template(e)},e.escape=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},e.unescape=function(e){return e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"):e},n.thisRef=this,e.noConflict=function(){return e.oldT?n.thisRef.T=e.oldT:delete n.thisRef.T,e},this.T&&(e.oldT=this.T),this.T=e,typeof module!="undefined"&&module!==null&&(module.exports=e)}).call(this);