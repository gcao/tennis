<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<html class='no-js'>
  <head>
    <meta charset='utf-8' />
    <meta content='Guoliang Cao,Tennis,ATP,ATP 1000,Grand Slam,Roger Federer,Novak Djokovic,Rafael Nadal,Andy Murray,Ranking,Tennis players,Schedule,Tournaments,Rank History' name='keywords' />
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible' />
    <title>Guoliang's Tennis Page</title>
    <meta content="ATP Top 50 players' current ranking, rank history, tennis tournaments, player schedules etc" name='description' />
    <meta content='width=device-width' name='viewport' />
    <script src='javascripts/vendor/modernizr-2.6.1.min.js'></script>
    <link href='stylesheets/site.css' rel='stylesheet' />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type='text/javascript'>
      //<![CDATA[
        var useLocalData = false;
        window.jQuery || document.write('<' + 'script src="javascripts/vendor/jquery-1.8.0.min.js"><' + '/script>')
      //]]>
    </script>
    <script src='javascripts/site.js'></script>
  </head>
  <body>
    <!--[if lt IE 7]> <p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p> <![endif]-->
    <header>
      <div class='wrap'>
        <h2>
          <a href='index.html'>
            <img class='logo' src='images/site-logo.gif' />
          </a>
        </h2>
        <ul id='nav'>
          <li class='rankings'>
            <a href='rankings.html'>Rankings</a>
          </li>
          <li class='current rank-history'>
            <a href='javascript:void(0)'>Rank History</a>
            <ul>
              <li>
                <a href='rank-history.html?players=novak_djokovic,roger_federer,rafael_nadal,andy_murray'>BIG FOUR</a>
              </li>
              <li>
                <a href='rank-history.html?players=novak_djokovic'>Novak Djokovic</a>
              </li>
              <li>
                <a href='rank-history.html?players=roger_federer'>Roger Federer</a>
              </li>
              <li>
                <a href='rank-history.html?players=andy_murray'>Andy Murray</a>
              </li>
              <li>
                <a href='rank-history.html?players=rafael_nadal'>Rafael Nadal</a>
              </li>
            </ul>
          </li>
          <li class='win-loss'>
            <a href='javascript:void(0)'>Win/Loss</a>
            <ul>
              <li>
                <a href='win-loss.html?players=novak_djokovic,roger_federer,rafael_nadal,andy_murray'>BIG FOUR</a>
              </li>
              <li>
                <a href='win-loss.html?players=novak_djokovic'>Novak Djokovic</a>
              </li>
              <li>
                <a href='win-loss.html?players=roger_federer'>Roger Federer</a>
              </li>
              <li>
                <a href='win-loss.html?players=andy_murray'>Andy Murray</a>
              </li>
              <li>
                <a href='win-loss.html?players=rafael_nadal'>Rafael Nadal</a>
              </li>
              <li>
                <a href='win-loss.html?players=david_ferrer'>David Ferrer</a>
              </li>
              <li>
                <a href='win-loss.html?players=tomas_berdych'>Tomas Berdych</a>
              </li>
              <li>
                <a href='win-loss.html?players=juan_martin_del_potro'>Juan Martin Del Potro</a>
              </li>
              <li>
                <a href='win-loss.html?players=jo_wilfried_tsonga'>Jo-Wilfried Tsonga</a>
              </li>
            </ul>
          </li>
          <li class='tournaments'>
            <a href='javascript:void(0)'>Schedules</a>
            <ul>
              <li>
                <a href='tournaments.html'>Tournaments</a>
              </li>
              <li>
                <a href='schedule.html?player=novak_djokovic'>Novak Djokovic</a>
              </li>
              <li>
                <a href='schedule.html?player=roger_federer'>Roger Federer</a>
              </li>
              <li>
                <a href='schedule.html?player=andy_murray'>Andy Murray</a>
              </li>
              <li>
                <a href='schedule.html?player=rafael_nadal'>Rafael Nadal</a>
              </li>
            </ul>
          </li>
          <li class='support'>
            <a href='support.html'>Support</a>
          </li>
        </ul>
      </div>
    </header>
    <div class='main' role='main'>
      <h2>
        ATP rank history
        <span class='generated-note'>(generated at <span class='generated-at'></span>)</span>
      </h2>
      <div id='rank-history'>
        <svg></svg>
      </div>
      <div id='timespan'>
        Time span:
        <select name='fromYear'></select>
        -
        <select name='toYear'></select>
        <button class='update'>Update Graph</button>
      </div>
      <div id='players'></div>
      <div class='backToHome'><a href='index.html'>Back to home</a></div>
      <link href='stylesheets/nv.d3.css' rel='stylesheet' />
      <script src='javascripts/vendor/d3.v2.min.js'></script>
      <script src='javascripts/vendor/nv.d3.min.js'></script>
      <script type='text/javascript'>
        //<![CDATA[
          (function() {
      
        loadData("rankings", function(rankings) {
          var fromYear, fromYearParam, players, playersParam, toYear, toYearParam;
          updateGenerationTime(rankings.generated_at);
          $("[name=fromYear]").change(changeFromYear);
          $.each(rankings.data, function(i, r) {
            var name, value;
            if (i >= 50) {
              return;
            }
            name = r.first + " " + r.last;
            value = (r.first + "_" + r.last).toLowerCase().replace(/[ -]/g, "_");
            $("#players").append("<div class=\"player\"><input type=\"checkbox\" name=\"player\" value=\"" + value + "\"><span>" + name + "</span></div>");
            if (i % 5 === 4) {
              return $('#players').append('<br/>');
            }
          });
          $("button.update").click(function() {
            var i, players, s;
            players = $("[name=player]:checked").map(function() {
              return this.value;
            });
            if (players.length === 0) {
              return alert("No player is selected.");
            } else if (players.length === 1) {
              return window.location = location.pathname + "?players=" + players[0];
            } else {
              s = players[0];
              i = 1;
              while (i < players.length) {
                s += "," + players[i];
                i++;
              }
              return window.location = location.pathname + "?players=" + s + "&fromYear=" + $("[name=fromYear]").val() + "&toYear=" + $("[name=toYear]").val();
            }
          });
          fromYear = 2003;
          fromYearParam = getQueryVar("fromYear");
          if (fromYearParam) {
            fromYear = parseInt(fromYearParam);
          }
          initFromYear();
          $("[name=fromYear]").val(fromYear);
          toYear = getYear();
          toYearParam = getQueryVar("toYear");
          if (toYearParam) {
            toYear = parseInt(toYearParam);
          }
          initToYear(fromYear);
          $("[name=toYear]").val(toYear);
          players = null;
          playersParam = getQueryVar("players");
          if (playersParam && playersParam !== "") {
            players = playersParam.split(",");
          } else {
            players = ["novak_djokovic", "roger_federer", "rafael_nadal", "andy_murray"];
          }
          $.each(players, function(i, p) {
            return $("[value=" + p + "]").click();
          });
          return loadAndShowRankHistory(players, fromYear, toYear);
        });
      
      }).call(this);
      
        //]]>
      </script>
    </div>
    <footer></footer>
    <script type='text/javascript'>
      //<![CDATA[
        if (!location.hostname.match('localhost')) {
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-38153915-1']);
          _gaq.push(['_trackPageview']);
        
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        }
      //]]>
    </script>
  </body>
</html>
